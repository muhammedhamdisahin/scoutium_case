<script setup lang="ts">
import { usePlayerStore } from '@/stores/PlayerStore';
import type { Player } from '@/types/UserList';
interface State{
  player: Player;
}

const props = defineProps <State>();

const playerStore = usePlayerStore();

const onDragStart = (event: DragEvent) => {
  event.dataTransfer?.setData("playerID", String(props.player.player.id));
}

const removePlayer = () => {
  playerStore.setRoster({ positionID: 1, playerID: props.player.player.id! }, "remove");
};


const getName = () => {
  let name = "";

  const splitName = props.player.player.firstname?.split(" ")!;

  if(splitName[0]) name = splitName[0][0] + ". "
  if(splitName[1]) name += splitName[1][0] + ". "
  if(props.player.player.lastname) name += props.player.player.lastname

  return name;
}

</script>

<template>
  <div 
	:class="{ 'custom-cursor': !playerStore.isSubmit }" 
  @dragstart="onDragStart"
  :draggable="!playerStore.isSubmit" 
  @dragover.prevent
  >
    <svg width="80" height="62" viewBox="0 0 80 62" fill="none" xmlns="http://www.w3.org/2000/svg">
      <g clip-path="url(#clip0_1_18576)">
        <mask id="path-1-inside-1_1_18576" fill="white">
          <path
            fill-rule="evenodd"
            clip-rule="evenodd"
            d="M36.3545 11.0016C36.5316 13.3906 39.6802 13.9998 40.0012 13.9998C40.3604 13.9998 43.4844 13.7082 43.6457 11.0108L43.6512 11.0093C43.6512 11.0093 46.6569 12.5485 47.0287 12.7216C47.402 12.8854 50 14.0859 50 16.7326V21.9779C50 22.3323 49.7127 22.6197 49.3582 22.6197H47.6825C47.328 22.6197 47.0407 22.907 47.0407 23.2615V29.3582C47.0407 29.7127 46.7533 30 46.3989 30H33.6011C33.2466 30 32.9593 29.7127 32.9593 29.3582V23.2615C32.9593 22.907 32.672 22.6197 32.3175 22.6197H30.6418C30.2873 22.6197 30 22.3323 30 21.9779V16.7326C30 14.1803 32.4173 12.9937 32.9232 12.7454C32.9419 12.7362 32.958 12.7283 32.9713 12.7216C33.3431 12.5355 36.3488 11 36.3488 11L36.3545 11.0016Z"
          />
        </mask>
        <path
          fill-rule="evenodd"
          clip-rule="evenodd"
          d="M36.3545 11.0016C36.5316 13.3906 39.6802 13.9998 40.0012 13.9998C40.3604 13.9998 43.4844 13.7082 43.6457 11.0108L43.6512 11.0093C43.6512 11.0093 46.6569 12.5485 47.0287 12.7216C47.402 12.8854 50 14.0859 50 16.7326V21.9779C50 22.3323 49.7127 22.6197 49.3582 22.6197H47.6825C47.328 22.6197 47.0407 22.907 47.0407 23.2615V29.3582C47.0407 29.7127 46.7533 30 46.3989 30H33.6011C33.2466 30 32.9593 29.7127 32.9593 29.3582V23.2615C32.9593 22.907 32.672 22.6197 32.3175 22.6197H30.6418C30.2873 22.6197 30 22.3323 30 21.9779V16.7326C30 14.1803 32.4173 12.9937 32.9232 12.7454C32.9419 12.7362 32.958 12.7283 32.9713 12.7216C33.3431 12.5355 36.3488 11 36.3488 11L36.3545 11.0016Z"
          :fill="playerStore.selectColor"
        />
        <!-- Forma Rengi -->
        <path
          d="M36.3545 11.0016L36.8531 10.9646L36.8272 10.6157L36.4906 10.5205L36.3545 11.0016ZM43.6457 11.0108L43.5108 10.5294L43.1679 10.6255L43.1466 10.981L43.6457 11.0108ZM43.6512 11.0093L43.8791 10.5643L43.7048 10.475L43.5162 10.5279L43.6512 11.0093ZM47.0287 12.7216L46.8176 13.175L46.8278 13.1795L47.0287 12.7216ZM32.9232 12.7454L33.1435 13.1942L33.1435 13.1942L32.9232 12.7454ZM32.9713 12.7216L32.7475 12.2745L32.7475 12.2745L32.9713 12.7216ZM36.3488 11L36.485 10.5189L36.2961 10.4655L36.1214 10.5547L36.3488 11ZM35.8558 11.0386C35.9628 12.481 36.9716 13.351 37.8894 13.8382C38.3539 14.0848 38.8189 14.2477 39.1882 14.3494C39.5398 14.4462 39.8506 14.4998 40.0012 14.4998V13.4998C40.0092 13.4998 39.9626 13.4977 39.8491 13.4771C39.747 13.4585 39.6114 13.4287 39.4536 13.3853C39.1367 13.298 38.7433 13.1594 38.3583 12.955C37.5773 12.5403 36.9233 11.9112 36.8531 10.9646L35.8558 11.0386ZM40.0012 14.4998C40.2365 14.4998 41.1858 14.4175 42.1158 13.9668C43.0661 13.5062 44.05 12.6266 44.1448 11.0407L43.1466 10.981C43.0801 12.0924 42.4214 12.7074 41.6796 13.0669C40.9174 13.4364 40.1251 13.4998 40.0012 13.4998V14.4998ZM43.5162 10.5279L43.5108 10.5294L43.7807 11.4923L43.7861 11.4907L43.5162 10.5279ZM47.2397 12.2684C47.0643 12.1867 46.2318 11.7647 45.4275 11.355C45.0288 11.152 44.6417 10.9543 44.3542 10.8073C44.2105 10.7338 44.0917 10.6731 44.0088 10.6307C43.9674 10.6095 43.9349 10.5929 43.9129 10.5816C43.9018 10.5759 43.8934 10.5716 43.8877 10.5687C43.8848 10.5672 43.8827 10.5661 43.8812 10.5654C43.8805 10.565 43.88 10.5647 43.8796 10.5645C43.8794 10.5645 43.8793 10.5644 43.8792 10.5643C43.8792 10.5643 43.8791 10.5643 43.8791 10.5643C43.8791 10.5643 43.8791 10.5643 43.6512 11.0093C43.4233 11.4543 43.4233 11.4544 43.4233 11.4544C43.4233 11.4544 43.4234 11.4544 43.4234 11.4544C43.4235 11.4545 43.4236 11.4545 43.4238 11.4546C43.4242 11.4548 43.4247 11.4551 43.4255 11.4555C43.4269 11.4562 43.4291 11.4573 43.4319 11.4588C43.4376 11.4617 43.4461 11.466 43.4572 11.4717C43.4793 11.483 43.5118 11.4997 43.5533 11.5209C43.6363 11.5634 43.7552 11.6242 43.8991 11.6977C44.1868 11.8448 44.5743 12.0427 44.9736 12.2461C45.7651 12.6493 46.6213 13.0835 46.8176 13.1749L47.2397 12.2684ZM50.5 16.7326C50.5 15.228 49.7569 14.143 48.996 13.431C48.2395 12.7231 47.4372 12.3549 47.2296 12.2638L46.8278 13.1795C46.9935 13.2522 47.6769 13.5661 48.3127 14.1611C48.9441 14.752 49.5 15.5905 49.5 16.7326H50.5ZM50.5 21.9779V16.7326H49.5V21.9779H50.5ZM49.3582 23.1197C49.9888 23.1197 50.5 22.6085 50.5 21.9779H49.5C49.5 22.0562 49.4365 22.1197 49.3582 22.1197V23.1197ZM47.6825 23.1197H49.3582V22.1197H47.6825V23.1197ZM47.5407 23.2615C47.5407 23.1832 47.6042 23.1197 47.6825 23.1197V22.1197C47.0519 22.1197 46.5407 22.6309 46.5407 23.2615H47.5407ZM47.5407 29.3582V23.2615H46.5407V29.3582H47.5407ZM46.3989 30.5C47.0295 30.5 47.5407 29.9888 47.5407 29.3582H46.5407C46.5407 29.4365 46.4772 29.5 46.3989 29.5V30.5ZM33.6011 30.5H46.3989V29.5H33.6011V30.5ZM32.4593 29.3582C32.4593 29.9888 32.9705 30.5 33.6011 30.5V29.5C33.5228 29.5 33.4593 29.4365 33.4593 29.3582H32.4593ZM32.4593 23.2615V29.3582H33.4593V23.2615H32.4593ZM32.3175 23.1197C32.3958 23.1197 32.4593 23.1832 32.4593 23.2615H33.4593C33.4593 22.6309 32.9481 22.1197 32.3175 22.1197V23.1197ZM30.6418 23.1197H32.3175V22.1197H30.6418V23.1197ZM29.5 21.9779C29.5 22.6085 30.0112 23.1197 30.6418 23.1197V22.1197C30.5635 22.1197 30.5 22.0562 30.5 21.9779H29.5ZM29.5 16.7326V21.9779H30.5V16.7326H29.5ZM32.7029 12.2965C32.4417 12.4248 31.651 12.8116 30.924 13.5159C30.1919 14.2252 29.5 15.2815 29.5 16.7326H30.5C30.5 15.6314 31.0168 14.8183 31.6198 14.2341C32.228 13.6449 32.8989 13.3143 33.1435 13.1942L32.7029 12.2965ZM32.7475 12.2745C32.7363 12.2801 32.7222 12.2871 32.7029 12.2965L33.1435 13.1942C33.1617 13.1853 33.1797 13.1764 33.1951 13.1687L32.7475 12.2745ZM36.3488 11C36.1214 10.5547 36.1214 10.5547 36.1213 10.5548C36.1213 10.5548 36.1213 10.5548 36.1212 10.5548C36.1211 10.5549 36.121 10.5549 36.1208 10.555C36.1205 10.5552 36.1199 10.5555 36.1192 10.5558C36.1177 10.5566 36.1156 10.5577 36.1127 10.5591C36.107 10.5621 36.0986 10.5664 36.0875 10.572C36.0654 10.5833 36.033 10.5999 35.9915 10.6211C35.9086 10.6634 35.7898 10.7241 35.646 10.7975C35.3584 10.9444 34.9711 11.1421 34.5722 11.3457C33.7729 11.7535 32.9311 12.1826 32.7475 12.2745L33.1951 13.1687C33.3833 13.0746 34.2302 12.6428 35.0267 12.2364C35.4258 12.0328 35.8131 11.835 36.1008 11.6881C36.2446 11.6147 36.3635 11.554 36.4464 11.5116C36.4878 11.4904 36.5203 11.4739 36.5424 11.4626C36.5535 11.4569 36.562 11.4526 36.5677 11.4497C36.5705 11.4482 36.5727 11.4471 36.5741 11.4464C36.5748 11.446 36.5754 11.4457 36.5757 11.4455C36.5759 11.4455 36.5761 11.4454 36.5762 11.4453C36.5762 11.4453 36.5762 11.4453 36.5763 11.4453C36.5763 11.4453 36.5763 11.4453 36.3488 11ZM36.4906 10.5205L36.485 10.5189L36.2127 11.4811L36.2183 11.4827L36.4906 10.5205Z"
          fill="white"
          mask="url(#path-1-inside-1_1_18576)"
        />
      
        <text
          x="40"
          y="25"
          :fill="playerStore.selectColor === '#ffffff' ? '#000': 'white'"
          font-size="10"
          text-anchor="middle"
        > 
        {{props.player.jersey_number}}
        <!-- Player number -->
        </text>
      </g>
      <g opacity="0.5" clip-path="url(#clip1_1_18576)">
        <!-- Çarpı İşareti -->
        <path
          fill-rule="evenodd"
          clip-rule="evenodd"
          d="M40 10C41.3261 10 42.5979 9.47322 43.5355 8.53553C44.4732 7.59785 45 6.32608 45 5C45 3.67392 44.4732 2.40215 43.5355 1.46447C42.5979 0.526784 41.3261 0 40 0C38.6739 0 37.4021 0.526784 36.4645 1.46447C35.5268 2.40215 35 3.67392 35 5C35 6.32608 35.5268 7.59785 36.4645 8.53553C37.4021 9.47322 38.6739 10 40 10ZM39.1919 3.30813C39.074 3.19428 38.9161 3.13128 38.7522 3.1327C38.5884 3.13413 38.4316 3.19986 38.3157 3.31574C38.1999 3.43162 38.1341 3.58838 38.1327 3.75225C38.1313 3.91612 38.1943 4.074 38.3081 4.19187L39.1163 5L38.3081 5.80813C38.2484 5.86578 38.2008 5.93474 38.1681 6.011C38.1353 6.08725 38.1181 6.16926 38.1173 6.25225C38.1166 6.33524 38.1324 6.41754 38.1639 6.49435C38.1953 6.57116 38.2417 6.64094 38.3004 6.69962C38.3591 6.7583 38.4288 6.80471 38.5057 6.83614C38.5825 6.86756 38.6648 6.88338 38.7478 6.88266C38.8307 6.88194 38.9128 6.86469 38.989 6.83194C39.0653 6.79918 39.1342 6.75157 39.1919 6.69187L40 5.88375L40.8081 6.69187C40.926 6.80572 41.0839 6.86872 41.2478 6.8673C41.4116 6.86587 41.5684 6.80014 41.6843 6.68426C41.8001 6.56838 41.8659 6.41162 41.8673 6.24775C41.8687 6.08388 41.8057 5.926 41.6919 5.80813L40.8837 5L41.6919 4.19187C41.8057 4.074 41.8687 3.91612 41.8673 3.75225C41.8659 3.58838 41.8001 3.43162 41.6843 3.31574C41.5684 3.19986 41.4116 3.13413 41.2478 3.1327C41.0839 3.13128 40.926 3.19428 40.8081 3.30813L40 4.11625L39.1919 3.30813Z"
          fill="white"
          @click="removePlayer"
          style="cursor: pointer;"
        />
      </g>
      <text
      x="40"
        y="45"
        fill="#091E42"
        font-size="12"
      text-anchor="middle"
      > 
      {{getName()}}
      <!-- Player Name -->
      </text>
      <defs>
        <clipPath id="clip0_1_18576">
          <rect width="20" height="19" fill="white" transform="translate(30 11)" />
        </clipPath>
        <clipPath id="clip1_1_18576">
          <rect width="10" height="10" fill="white" transform="translate(35)" />
        </clipPath>
      </defs>
    </svg>
  </div>
</template>
